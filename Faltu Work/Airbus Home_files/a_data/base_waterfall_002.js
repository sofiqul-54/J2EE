/**
 * Stackla is made available under a commercial licence
 * and is subject to Stackla's Terms of Service.
 *
 * Refer to https://stackla.com/terms-of-service/ 
 * or contact support@stackla.com for further clarification.
 *
 * Built on 2018-05-18 12:05:03
 */
!function(a,b,c){"use strict";var d,e=a.document,f=a.Modernizr,g=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},h="Moz Webkit O Ms".split(" "),i=function(a){var b,c=e.documentElement.style;if("string"==typeof c[a])return a;a=g(a);for(var d=0,f=h.length;d<f;d++)if(b=h[d]+a,"string"==typeof c[b])return b},j=i("transform"),k=i("transitionProperty"),l={csstransforms:function(){return!!j},csstransforms3d:function(){var a=!!i("perspective");if(a){var c=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),d="@media ("+c.join("transform-3d),(")+"modernizr)",e=b("<style>"+d+"{#modernizr{height:3px}}</style>").appendTo("head"),f=b('<div id="modernizr" />').appendTo("html");a=3===f.height(),f.remove(),e.remove()}return a},csstransitions:function(){return!!k}};if(f)for(d in l)f.hasOwnProperty(d)||f.addTest(d,l[d]);else{f=a.Modernizr={_version:"1.6ish: miniModernizr for Isotope"};var m,n=" ";for(d in l)m=l[d](),f[d]=m,n+=" "+(m?"":"no-")+d;b("html").addClass(n)}if(f.csstransforms){var o=f.csstransforms3d?{translate:function(a){return"translate3d("+a[0]+"px, "+a[1]+"px, 0) "},scale:function(a){return"scale3d("+a+", "+a+", 1) "}}:{translate:function(a){return"translate("+a[0]+"px, "+a[1]+"px) "},scale:function(a){return"scale("+a+") "}},p=function(a,c,d){var e,f,g=b.data(a,"isoTransform")||{},h={},i={};h[c]=d,b.extend(g,h);for(e in g)f=g[e],i[e]=o[e](f);var k=i.translate||"",l=i.scale||"",m=k+l;b.data(a,"isoTransform",g),a.style[j]=m};b.cssNumber.scale=!0,b.cssHooks.scale={set:function(a,b){p(a,"scale",b)},get:function(a,c){var d=b.data(a,"isoTransform");return d&&d.scale?d.scale:1}},b.fx.step.scale=function(a){b.cssHooks.scale.set(a.elem,a.now+a.unit)},b.cssNumber.translate=!0,b.cssHooks.translate={set:function(a,b){p(a,"translate",b)},get:function(a,c){var d=b.data(a,"isoTransform");return d&&d.translate?d.translate:[0,0]}}}var q,r;f.csstransitions&&(q={WebkitTransitionProperty:"webkitTransitionEnd",MozTransitionProperty:"transitionend",OTransitionProperty:"oTransitionEnd",transitionProperty:"transitionend"}[k],r=i("transitionDuration"));var s,t=b.event;t.special.smartresize={setup:function(){b(this).bind("resize",t.special.smartresize.handler)},teardown:function(){b(this).unbind("resize",t.special.smartresize.handler)},handler:function(a,b){var c=this,d=arguments;a.type="smartresize",s&&clearTimeout(s),s=setTimeout(function(){jQuery.event.handle.apply(c,d)},"execAsap"===b?0:100)}},b.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])},b.Isotope=function(a,c,d){this.element=b(c),this._create(a),this._init(d)};var u=["width","height"],v=b(a);b.Isotope.settings={resizable:!0,layoutMode:"masonry",containerClass:"isotope",itemClass:"isotope-item",hiddenClass:"isotope-hidden",hiddenStyle:{opacity:0,scale:.001},visibleStyle:{opacity:1,scale:1},containerStyle:{position:"relative",overflow:"hidden"},animationEngine:"best-available",animationOptions:{queue:!1,duration:800},sortBy:"original-order",sortAscending:!0,resizesContainer:!0,transformsEnabled:!b.browser.opera,itemPositionDataEnabled:!1},b.Isotope.prototype={_create:function(a){this.options=b.extend({},b.Isotope.settings,a),this.styleQueue=[],this.elemCount=0;var c=this.element[0].style;this.originalStyle={};var d=u.slice(0);for(var e in this.options.containerStyle)d.push(e);for(var f=0,g=d.length;f<g;f++)e=d[f],this.originalStyle[e]=c[e]||"";this.element.css(this.options.containerStyle),this._updateAnimationEngine(),this._updateUsingTransforms();var h={"original-order":function(a,b){return b.elemCount++,b.elemCount},random:function(){return Math.random()}};this.options.getSortData=b.extend(this.options.getSortData,h),this.reloadItems(),this.offset={left:parseInt(this.element.css("padding-left")||0,10),top:parseInt(this.element.css("padding-top")||0,10)};var i=this;setTimeout(function(){i.element.addClass(i.options.containerClass)},0),this.options.resizable&&v.bind("smartresize.isotope",function(){i.resize()}),this.element.delegate("."+this.options.hiddenClass,"click",function(){return!1})},_getAtoms:function(a){var b=this.options.itemSelector,c=b?a.filter(b).add(a.find(b)):a,d={position:"absolute"};return this.usingTransforms&&(d.left=0,d.top=0),c.css(d).addClass(this.options.itemClass),this.updateSortData(c,!0),c},_init:function(a){this.$filteredAtoms=this._filter(this.$allAtoms),this._sort(),this.reLayout(a)},option:function(a){if(b.isPlainObject(a)){this.options=b.extend(!0,this.options,a);var c;for(var d in a)c="_update"+g(d),this[c]&&this[c]()}},_updateAnimationEngine:function(){var a,b=this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,"");switch(b){case"css":case"none":a=!1;break;case"jquery":a=!0;break;default:a=!f.csstransitions}this.isUsingJQueryAnimation=a,this._updateUsingTransforms()},_updateTransformsEnabled:function(){this._updateUsingTransforms()},_updateUsingTransforms:function(){var a=this.usingTransforms=this.options.transformsEnabled&&f.csstransforms&&f.csstransitions&&!this.isUsingJQueryAnimation;a||(delete this.options.hiddenStyle.scale,delete this.options.visibleStyle.scale),this.getPositionStyles=a?this._translate:this._positionAbs},_filter:function(a){var b=""===this.options.filter?"*":this.options.filter;if(!b)return a;var c=this.options.hiddenClass,d="."+c,e=a.filter(d),f=e;if("*"!==b){f=e.filter(b);var g=a.not(d).not(b).addClass(c);this.styleQueue.push({$el:g,style:this.options.hiddenStyle})}return this.styleQueue.push({$el:f,style:this.options.visibleStyle}),f.removeClass(c),a.filter(b)},updateSortData:function(a,c){var d,e,f=this,g=this.options.getSortData;a.each(function(){d=b(this),e={};for(var a in g)c||"original-order"!==a?e[a]=g[a](d,f):e[a]=b.data(this,"isotope-sort-data")[a];b.data(this,"isotope-sort-data",e)})},_sort:function(){var a=this.options.sortBy,b=this._getSorter,c=this.options.sortAscending?1:-1,d=function(d,e){var f=b(d,a),g=b(e,a);return f===g&&"original-order"!==a&&(f=b(d,"original-order"),g=b(e,"original-order")),(f>g?1:f<g?-1:0)*c};this.$filteredAtoms.sort(d)},_getSorter:function(a,c){return b.data(a,"isotope-sort-data")[c]},_translate:function(a,b){return{translate:[a,b]}},_positionAbs:function(a,b){return{left:a,top:b}},_pushPosition:function(a,b,c){b=Math.round(b+this.offset.left),c=Math.round(c+this.offset.top);var d=this.getPositionStyles(b,c);this.styleQueue.push({$el:a,style:d}),this.options.itemPositionDataEnabled&&a.data("isotope-item-position",{x:b,y:c})},layout:function(a,b){var c=this.options.layoutMode;if(this["_"+c+"Layout"](a),this.options.resizesContainer){var d=this["_"+c+"GetContainerSize"]();this.styleQueue.push({$el:this.element,style:d})}this._processStyleQueue(a,b),this.isLaidOut=!0},_processStyleQueue:function(a,c){var d,e,g,h,i=this.isLaidOut&&this.isUsingJQueryAnimation?"animate":"css",j=this.options.animationOptions,k=this.options.onLayout;if(e=function(a,b){b.$el[i](b.style,j)},this._isInserting&&this.isUsingJQueryAnimation)e=function(a,b){d=b.$el.hasClass("no-transition")?"css":i,b.$el[d](b.style,j)};else if(c||k||j.complete){var l=!1,m=[c,k,j.complete],n=this;if(g=!0,h=function(){if(!l){for(var b,c=0,d=m.length;c<d;c++)b=m[c],"function"==typeof b&&b.call(n.element,a,n);l=!0}},this.isUsingJQueryAnimation&&"animate"===i)j.complete=h,g=!1;else if(f.csstransitions){for(var o,p=0,s=this.styleQueue[0],t=s&&s.$el;!t||!t.length;){if(o=this.styleQueue[p++],!o)return;t=o.$el}var u=parseFloat(getComputedStyle(t[0])[r]);u>0&&(e=function(a,b){b.$el[i](b.style,j).one(q,h)},g=!1)}}b.each(this.styleQueue,e),g&&h(),this.styleQueue=[]},resize:function(){this["_"+this.options.layoutMode+"ResizeChanged"]()&&this.reLayout()},reLayout:function(a){this["_"+this.options.layoutMode+"Reset"](),this.layout(this.$filteredAtoms,a)},addItems:function(a,b){var c=this._getAtoms(a);this.$allAtoms=this.$allAtoms.add(c),b&&b(c)},insert:function(a,b){this.element.append(a);var c=this;this.addItems(a,function(a){var d=c._filter(a);c._addHideAppended(d),c._sort(),c.reLayout(),c._revealAppended(d,b)})},appended:function(a,b){var c=this;this.addItems(a,function(a){c._addHideAppended(a),c.layout(a),c._revealAppended(a,b)})},_addHideAppended:function(a){this.$filteredAtoms=this.$filteredAtoms.add(a),a.addClass("no-transition"),this._isInserting=!0,this.styleQueue.push({$el:a,style:this.options.hiddenStyle})},_revealAppended:function(a,b){var c=this;setTimeout(function(){a.removeClass("no-transition"),c.styleQueue.push({$el:a,style:c.options.visibleStyle}),c._isInserting=!1,c._processStyleQueue(a,b)},10)},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children())},remove:function(a,b){var c=this,d=function(){c.$allAtoms=c.$allAtoms.not(a),a.remove(),b&&b.call(c.element)};a.filter(":not(."+this.options.hiddenClass+")").length?(this.styleQueue.push({$el:a,style:this.options.hiddenStyle}),this.$filteredAtoms=this.$filteredAtoms.not(a),this._sort(),this.reLayout(d)):d()},shuffle:function(a){this.updateSortData(this.$allAtoms),this.options.sortBy="random",this._sort(),this.reLayout(a)},destroy:function(){var a=this.usingTransforms,b=this.options;this.$allAtoms.removeClass(b.hiddenClass+" "+b.itemClass).each(function(){var b=this.style;b.position="",b.top="",b.left="",b.opacity="",a&&(b[j]="")});var c=this.element[0].style;for(var d in this.originalStyle)c[d]=this.originalStyle[d];this.element.unbind(".isotope").undelegate("."+b.hiddenClass,"click").removeClass(b.containerClass).removeData("isotope"),v.unbind(".isotope")},_getSegments:function(a){var b,c=this.options.layoutMode,d=a?"rowHeight":"columnWidth",e=a?"height":"width",f=a?"rows":"cols",h=this.element[e](),i=this.options[c]&&this.options[c][d]||this.$filteredAtoms["outer"+g(e)](!0)||h;b=Math.floor(h/i),b=Math.max(b,1),this[c][f]=b,this[c][d]=i},_checkIfSegmentsChanged:function(a){var b=this.options.layoutMode,c=a?"rows":"cols",d=this[b][c];return this._getSegments(a),this[b][c]!==d},_masonryReset:function(){this.masonry={},this._getSegments();var a=this.masonry.cols;for(this.masonry.colYs=[];a--;)this.masonry.colYs.push(0)},_masonryLayout:function(a){var c=this,d=c.masonry;a.each(function(){var a=b(this),e=Math.ceil(a.outerWidth(!0)/d.columnWidth);if(e=Math.min(e,d.cols),1===e)c._masonryPlaceBrick(a,d.colYs);else{var f,g,h=d.cols+1-e,i=[];for(g=0;g<h;g++)f=d.colYs.slice(g,g+e),i[g]=Math.max.apply(Math,f);c._masonryPlaceBrick(a,i)}})},_masonryPlaceBrick:function(a,b){for(var c=Math.min.apply(Math,b),d=0,e=0,f=b.length;e<f;e++)if(b[e]===c){d=e;break}var g=this.masonry.columnWidth*d,h=c;this._pushPosition(a,g,h);var i=c+a.outerHeight(!0),j=this.masonry.cols+1-f;for(e=0;e<j;e++)this.masonry.colYs[d+e]=i},_masonryGetContainerSize:function(){var a=Math.max.apply(Math,this.masonry.colYs);return{height:a}},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged()},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0}},_fitRowsLayout:function(a){var c=this,d=this.element.width(),e=this.fitRows;a.each(function(){var a=b(this),f=a.outerWidth(!0),g=a.outerHeight(!0);0!==e.x&&f+e.x>d&&(e.x=0,e.y=e.height),c._pushPosition(a,e.x,e.y),e.height=Math.max(e.y+g,e.height),e.x+=f})},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height}},_fitRowsResizeChanged:function(){return!0},_cellsByRowReset:function(){this.cellsByRow={index:0},this._getSegments(),this._getSegments(!0)},_cellsByRowLayout:function(a){var c=this,d=this.cellsByRow;a.each(function(){var a=b(this),e=d.index%d.cols,f=Math.floor(d.index/d.cols),g=(e+.5)*d.columnWidth-a.outerWidth(!0)/2,h=(f+.5)*d.rowHeight-a.outerHeight(!0)/2;c._pushPosition(a,g,h),d.index++})},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top}},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged()},_straightDownReset:function(){this.straightDown={y:0}},_straightDownLayout:function(a){var c=this;a.each(function(a){var d=b(this);c._pushPosition(d,0,c.straightDown.y),c.straightDown.y+=d.outerHeight(!0)})},_straightDownGetContainerSize:function(){return{height:this.straightDown.y}},_straightDownResizeChanged:function(){return!0},_masonryHorizontalReset:function(){this.masonryHorizontal={},this._getSegments(!0);var a=this.masonryHorizontal.rows;for(this.masonryHorizontal.rowXs=[];a--;)this.masonryHorizontal.rowXs.push(0)},_masonryHorizontalLayout:function(a){var c=this,d=c.masonryHorizontal;a.each(function(){var a=b(this),e=Math.ceil(a.outerHeight(!0)/d.rowHeight);if(e=Math.min(e,d.rows),1===e)c._masonryHorizontalPlaceBrick(a,d.rowXs);else{var f,g,h=d.rows+1-e,i=[];for(g=0;g<h;g++)f=d.rowXs.slice(g,g+e),i[g]=Math.max.apply(Math,f);c._masonryHorizontalPlaceBrick(a,i)}})},_masonryHorizontalPlaceBrick:function(a,b){for(var c=Math.min.apply(Math,b),d=0,e=0,f=b.length;e<f;e++)if(b[e]===c){d=e;break}var g=c,h=this.masonryHorizontal.rowHeight*d;this._pushPosition(a,g,h);var i=c+a.outerWidth(!0),j=this.masonryHorizontal.rows+1-f;for(e=0;e<j;e++)this.masonryHorizontal.rowXs[d+e]=i},_masonryHorizontalGetContainerSize:function(){var a=Math.max.apply(Math,this.masonryHorizontal.rowXs);return{width:a}},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0}},_fitColumnsLayout:function(a){var c=this,d=this.element.height(),e=this.fitColumns;a.each(function(){var a=b(this),f=a.outerWidth(!0),g=a.outerHeight(!0);0!==e.y&&g+e.y>d&&(e.x=e.width,e.y=0),c._pushPosition(a,e.x,e.y),e.width=Math.max(e.x+f,e.width),e.y+=g})},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width}},_fitColumnsResizeChanged:function(){return!0},_cellsByColumnReset:function(){this.cellsByColumn={index:0},this._getSegments(),this._getSegments(!0)},_cellsByColumnLayout:function(a){var c=this,d=this.cellsByColumn;a.each(function(){var a=b(this),e=Math.floor(d.index/d.rows),f=d.index%d.rows,g=(e+.5)*d.columnWidth-a.outerWidth(!0)/2,h=(f+.5)*d.rowHeight-a.outerHeight(!0)/2;c._pushPosition(a,g,h),d.index++})},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth}},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_straightAcrossReset:function(){this.straightAcross={x:0}},_straightAcrossLayout:function(a){var c=this;a.each(function(a){var d=b(this);c._pushPosition(d,c.straightAcross.x,0),c.straightAcross.x+=d.outerWidth(!0)})},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x}},_straightAcrossResizeChanged:function(){return!0}},b.fn.imagesLoaded=function(a){function c(){a.call(e,f)}function d(a){var e=a.target;e.src!==h&&b.inArray(e,i)===-1&&(i.push(e),--g<=0&&(setTimeout(c),f.unbind(".imagesLoaded",d)))}var e=this,f=e.find("img").add(e.filter("img")),g=f.length,h="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",i=[];return g||c(),f.bind("load.imagesLoaded error.imagesLoaded",d).each(function(){var a=this.src;this.src=h,this.src=a}),e};var w=function(b){a.console&&a.console.error(b)};b.fn.isotope=function(a,c){if("string"==typeof a){var d=Array.prototype.slice.call(arguments,1);this.each(function(){var c=b.data(this,"isotope");return c?b.isFunction(c[a])&&"_"!==a.charAt(0)?void c[a].apply(c,d):void w("no such method '"+a+"' for isotope instance"):void w("cannot call methods on isotope prior to initialization; attempted to call method '"+a+"'")})}else this.each(function(){var d=b.data(this,"isotope");d?(d.option(a),d._init(c)):b.data(this,"isotope",new b.Isotope(a,this,c))});return this}}(window,jQuery),window.Modernizr=function(a,b,c){function d(a){s.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(""+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,"-")&&s[e]!==c)return"pfx"!=b||e}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+v.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?g(f,b):(f=(a+" "+w.join(d+" ")+d).split(" "),h(f,b,c))}var j,k,l,m="2.6.3",n={},o=!0,p=b.documentElement,q="modernizr",r=b.createElement(q),s=r.style,t=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),u="Webkit Moz O ms",v=u.split(" "),w=u.toLowerCase().split(" "),x={},y=[],z=y.slice,A=function(a,c,d,e){var f,g,h,i,j=b.createElement("div"),k=b.body,l=k||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:q+(d+1),j.appendChild(h);return f=["&#173;",'<style id="s',q,'">',a,"</style>"].join(""),j.id=q,(k?j:l).innerHTML+=f,l.appendChild(j),k||(l.style.background="",l.style.overflow="hidden",i=p.style.overflow,p.style.overflow="hidden",p.appendChild(l)),g=c(j,a),k?j.parentNode.removeChild(j):(l.parentNode.removeChild(l),p.style.overflow=i),!!g},B={}.hasOwnProperty;l=e(B,"undefined")||e(B.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return B.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=z.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(z.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(z.call(arguments)))};return d}),x.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:A(["@media (",t.join("touch-enabled),("),q,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=9===a.offsetTop}),c};for(var C in x)l(x,C)&&(k=C.toLowerCase(),n[k]=x[C](),y.push((n[k]?"":"no-")+k));return n.addTest=function(a,b){if("object"==typeof a)for(var d in a)l(a,d)&&n.addTest(d,a[d]);else{if(a=a.toLowerCase(),n[a]!==c)return n;b="function"==typeof b?b():b,"undefined"!=typeof o&&o&&(p.className+=" "+(b?"":"no-")+a),n[a]=b}return n},d(""),r=j=null,n._version=m,n._prefixes=t,n._domPrefixes=w,n._cssomPrefixes=v,n.testProp=function(a){return g([a])},n.testAllProps=i,n.testStyles=A,p.className=p.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(o?" js "+y.join(" "):""),n}(this,this.document);var decorateTileData;!function(){"use strict";function a(){var a=window.navigator.userAgent,b=a.indexOf("MSIE ");return!!(b>0||navigator.userAgent.match(/Trident.*rv\:11\./))&&parseInt(a.substring(b+5,a.indexOf(".",b)))}function b(a){var b="";if("twitter"===a.source)b="//twitter.com/"+a.user+"/status/"+a.twitter_id;else if("youtube"===a.source)b="//youtu.be/"+a.youtube_id;else if("flickr"===a.source)b="//www.flickr.com/photos/"+a.source_user_id+"/"+a.flickr_id;else if("facebook"===a.source)b="undefined"!=typeof a.original_url&&a.original_url?a.original_url.replace(/^(http:|https:)/i,""):"//www.facebook.com/"+a.facebook_id.replace("_","/posts/");else if("stackla"===a.source){var c="//"+click_through_url.domain,d=a._id.$id,e=c+"/c/"+d;b=e}else b=a.original_url;return a.originalUrl=b,b}function c(a){var b="";if("undefined"!=typeof click_through_url.ct){var c=click_through_url.ct;b="[NONE]"===c?"no-click-through":"[EXPAND]"===c?"rss"===a.source?"original-click-through":"expand-click-through":"[STACKLA_URL]"===c?"stack-click-through":"[TILE_URL]"===c?"tile-click-through":"[ORIGINAL_URL]"===c?"original-click-through":"custom-click-through","undefined"!=typeof a.enable_click_through&&a.enable_click_through&&(b="")}return b}function d(a){var b="//"+stacklaString(click_through_url.domain).escapeHTML().s,c=a.originalUrl,d=a._id.$id,e=b+"/c/"+d,f="";return"undefined"!=typeof click_through_url.ct&&(f=click_through_url.ct,"[NONE]"===f?f="":"[EXPAND]"===f?f=/^[^\[]/.test(f)?f.replace("[EXPAND]",encodeURIComponent(c)):f.replace("[EXPAND]",c):/^[^\[]/.test(f)?(f=f.replace("[STACKLA_URL]",encodeURIComponent(b)),f=f.replace("[TILE_URL]",encodeURIComponent(e)),f=f.replace("[ORIGINAL_URL]",encodeURIComponent(c)),f=f.replace("[TILE_ID]",d)):(f=f.replace("[STACKLA_URL]",b),f=f.replace("[TILE_URL]",e),f=f.replace("[ORIGINAL_URL]",c)),"undefined"!=typeof a.enable_click_through&&a.enable_click_through&&(f=a.click_through)),f}function e(a){return"undefined"!=typeof a.entitlements&&a.entitlements?a.entitlements:a.entities}function f(a,b,c,d){if(("stackla"===a||"sta_feed"===a)&&"undefined"!=typeof d&&d&&"html"===d)return stacklaXSSFilter(b);if("twitter"===a)return c?(b=twttr.txt.autoLink(b,{urlEntities:c,targetBlank:!0}),b=twemoji.parse(b,{className:"tile-emoji"})):b;var e=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,f=$.trim(b);if(f){var g=/(<([^>]+)>)/gi;if(f=f.replace(g,""),f=f.replace(/^[\n\r]*/,""),f=f.replace(/[\n\r]*$/,""),f=f.replace(e,"<a href='$1' target='_new'>$1</a>"),f=f.replace(/[\n]+/g,"<br />"),"facebook"===a){var h=/@\[[^\]]*\]/g,i=f.match(h);if(i&&"object"==typeof i&&i.length){var j=/@\[([^:\]]*):([^:\]]*):([^:\]]*)\]/;for(var k in i)if(i.hasOwnProperty(k)){var l="<a href='http://www.facebook.com/$1' target='_new'>$3</a>",m=i[k].replace(j,l);f=f.replace(i[k],m)}}}return f=twemoji.parse(f,{className:"tile-emoji"})}return""}function g(a,b){if("undefined"!=typeof httpsRules&&httpsRules&&"undefined"!=typeof httpsRules[b]&&"undefined"!=typeof httpsRules[b].rules)for(var c in httpsRules[b].rules)if(httpsRules[b].rules.hasOwnProperty(c))try{var d=httpsRules[b].rules[c],e=new RegExp(d.from);if(e.test(a))return a.replace(e,d.to)}catch(a){}return a}function h(a,b){return b.is_audio&&!a?"https://assetscdn.stackla.com/media/images/common/audio-fallback.png":g(a,b.source)}function i(a){var b="";return"twitter"===a.source?b="//twitter.com/"+a.user:"facebook"===a.source?b="//www.facebook.com/"+a.source_user_id:"instagram"===a.source?b="//instagram.com/"+a.user:"pinterest"===a.source?b="//pinterest.com/"+a.source_user_id.replace(/\|/,"/"):"flickr"===a.source?b="//www.flickr.com/photos/"+a.source_user_id:"youtube"===a.source?b="undefined"==typeof a.youtube_channel_id?"http://www.youtube.com/user/"+a.user:"http://www.youtube.com/channel/"+a.youtube_channel_id:"rss"===a.source||"wordpress"===a.source?b=a.original_url.replace(/^(http:|https:)/i,""):"gplus"===a.source?b="//plus.google.com/"+a.source_user_id:"tumblr"===a.source?b=a.original_url.replace(/^(http:|https:)/i,""):"weibo"===a.source&&(b="//weibo.com/"+a.source_user_id),stacklaString(b).escapeHTML().s}function j(a,b){return g(a,b)}function k(a,b){var c,d=b.claimConfig,e=b.stackEnabledClaim,f=a.tags||[],g="1"===d.show_claim_button||d.show_claim_button===!0;return!(!(e&&d&&_.include(["twitter","instagram"],a.source)&&!_.isUndefined(a.claimed)&&g)||a.page_post)&&(c=d.show_claim_button_on_tags||[],!c.length||_.intersection(c,f).length>=1)}function l(a){for(var b in a)a.hasOwnProperty(b)&&"0"===a[b]&&(a[b]=0);return a}var m=_.get(window,"Stackla.Widget.Util",{}),n=FluidWidgetCommon.buildHasInteractionCallback(),o=function(a,b,c){return n(a,b,c)};decorateTileData=function(g,n,p){var q=_.cloneDeep(g);l(n),q.is_custom_tile="stackla"===q.source;var r=a();q.show_comments=q.is_custom_tile?q.enable_comments&&"[EXPAND]"===click_through_url.ct&&p.options.show_comments:n.show_comments&&"[EXPAND]"===click_through_url.ct&&p.options.show_comments,FluidWidgetCommon.isConfigTrue(p.options.show_additional_info)||"text"!==q.media||(q.show_comments=!1),q.original_url=b(q);var s=["tile",q.source,q.media,q.anonymous&&"anonymous",q.content_only&&"content_only",q.claimed&&"claimed",!q.avatar&&"no-avatar",c(q)],t=q.tags_extended.map(function(a){var b="product"===a.type?"product":"tag";return"contains-"+b+"-"+a.slug});q.tile_classes=s.concat(t).join(" "),q.data_href=d(q),q.msg=f(q.source,q.message,e(q),q.media),q.parsed_caption=$.trim($("<div></div>").html(q.msg).text()),q.source_is_twitter="twitter"===q.source,q.show_title=q.title&&"pinterest"!==q.source,q.title_string="rss"===q.source?stacklaString(q.title).decodeHTMLEntities().s.replace(/(<([^>]+)>)/gi,""):stacklaString(q.title).escapeHTML().s,q.ecal_data=!!q.ecal_data&&$.parseJSON(q.ecal_data),q.is_audio="audio"===q.media,q.is_video="video"===q.media,q.is_youtube="youtube"===q.video_source,q.show_vine=q.video_source&&"vine"===q.video_source&&(!r||r>8);var u,v=p.enableDoubleColumnSpan&&q.tags_extended.filter(function(a){return"doublecolumnspan"===a.slug}).length>0;if(q.image_s&&!v?(u=q.image_s,q.data_image_width=q.image_width_s,q.data_image_height=q.image_height_s,q.data_image_size="small"):(u=q.image,q.data_image_width=q.imageWidth,q.data_image_height=q.imageHeight,q.data_image_size="standard"),q.img_src=h(u,q),q.img_class=q.source+"-img tile-image",q.image_alt_text=[q.title,q.html,q.message].join("; "),q.show_shopspots=function(){var a=q.hotspots||[];return!!(p.stackEnabledShopspots&&n.show_shopspots&&q.image)&&(a=a.filter(function(a){return!(!a.tag||!a.tag.tag)}),!!a.length)}(),q.use_custom_shopspot_icon=!!p.appearance.shopspot_icon,q.custom_shopspot_icon=p.appearance.shopspot_icon,q.show_shopspots&&(q.shopspots=_.map(q.hotspots||[],function(a){return a.tag&&a.tag.tag?a:null}),q.shopspots=_.compact(q.shopspots)),q.avatar_link=i(q),q.avatar_url=j(q.avatar,q.source),q.avatar_alt_text=q.name||q.user,"youtube"!==q.source||q.avatar||(q.avatar="https://i3.ytimg.com/i/"+q.source_user_id+"/1.jpg"),q.is_twitter_or_instagram="twitter"===q.source||"instagram"===q.source,q.is_via_facebook=q.to_facebook_id&&q.to_facebook_name,q.via_text="via "+q.to_facebook_name,q.name_handle=q.name||q.user||q.source_user_id,q.formatted_time=m.formatDateTime(q.source_created_at),q.source_type=q.source.replace("sta_feed","stackla"),q.show_tag_container=n.show_tags&&q.tags_extended.filter(function(a){return"1"==a.publicly_visible}).length>0,q.show_likes=q.is_custom_tile?!!q.enable_ups:!!n.show_likes,q.like_is_on=(o("up",q,p)&&q.numUps>0,p.parent_page_permissions),q.show_dislikes=q.is_custom_tile?!!q.enable_downs:!!n.show_dislikes,q.dislike_is_on=(o("down",q)&&q.numDowns>0,p.parent_page_permissions),q.totalNumComments=0,"number"==typeof q.numComments&&"number"==typeof q.numDisabledComments&&"number"==typeof q.numQueuedComments&&q.numComments-q.numDisabledComments-q.numQueuedComments>0&&(q.totalNumComments=q.numComments-q.numDisabledComments-q.numQueuedComments),q.show_votes=n.show_votes&&stacklaSocialHub.actionVote(q),q.vote_is_on=o("vote",q,p.parent_page_permissions),p.parent_page_permissions){var w=getUrlVars();w.data_user_id&&w.data_user_hash||(q.show_votes=!1)}return q.show_interactions=q.show_likes||q.show_dislikes||q.show_votes||q.show_comments||n.show_sharing,q.show_claim=k(q,p),q}}();